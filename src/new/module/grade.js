const data = {
  "Value": 7,
  "Text": "연마 효과",
  "Tiers": [
      4
  ],
  "EtcSubs": [
      {
          "Value": 45,
          "Text": "공격력",
          "Class": "",
          "Categorys": [
              200020
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "0.40%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "0.95%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "1.55%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 53,
          "Text": "공격력",
          "Class": "",
          "Categorys": null,
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "80",
                  "Value": 1,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "195",
                  "Value": 2,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "390",
                  "Value": 3,
                  "IsPercentage": false
              }
          ]
      },
      {
          "Value": 44,
          "Text": "낙인력",
          "Class": "",
          "Categorys": [
              200010
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "2.15%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "4.80%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "8.00%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 46,
          "Text": "무기 공격력",
          "Class": "",
          "Categorys": [
              200020
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "0.80%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "1.80%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "3.00%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 54,
          "Text": "무기 공격력",
          "Class": "",
          "Categorys": null,
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "195",
                  "Value": 1,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "480",
                  "Value": 2,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "960",
                  "Value": 3,
                  "IsPercentage": false
              }
          ]
      },
      {
          "Value": 57,
          "Text": "상태이상 공격 지속시간",
          "Class": "",
          "Categorys": null,
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "0.20%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "0.50%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "1.00%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 43,
          "Text": "세레나데, 신앙, 조화 게이지 획득량",
          "Class": "",
          "Categorys": [
              200010
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "1.60%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "3.60%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "6.00%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 51,
          "Text": "아군 공격력 강화 효과",
          "Class": "",
          "Categorys": [
              200030
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "1.35%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "3.00%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "5.00%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 52,
          "Text": "아군 피해량 강화 효과",
          "Class": "",
          "Categorys": [
              200030
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "2.00%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "4.50%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "7.50%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 42,
          "Text": "적에게 주는 피해",
          "Class": "",
          "Categorys": [
              200010
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "0.55%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "1.20%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "2.00%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 58,
          "Text": "전투 중 생명력 회복량",
          "Class": "",
          "Categorys": null,
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "10",
                  "Value": 1,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "25",
                  "Value": 2,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "50",
                  "Value": 3,
                  "IsPercentage": false
              }
          ]
      },
      {
          "Value": 56,
          "Text": "최대 마나",
          "Class": "",
          "Categorys": null,
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "6",
                  "Value": 1,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "15",
                  "Value": 2,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "30",
                  "Value": 3,
                  "IsPercentage": false
              }
          ]
      },
      {
          "Value": 55,
          "Text": "최대 생명력",
          "Class": "",
          "Categorys": null,
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "1300",
                  "Value": 1,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "3250",
                  "Value": 2,
                  "IsPercentage": false
              },
              {
                  "DisplayValue": "6500",
                  "Value": 3,
                  "IsPercentage": false
              }
          ]
      },
      {
          "Value": 41,
          "Text": "추가 피해",
          "Class": "",
          "Categorys": [
              200010
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "0.70%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "1.60%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "2.60%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 49,
          "Text": "치명타 적중률",
          "Class": "",
          "Categorys": [
              200030
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "0.40%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "0.95%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "1.55%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 50,
          "Text": "치명타 피해",
          "Class": "",
          "Categorys": [
              200030
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "1.10%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "2.40%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "4.00%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 48,
          "Text": "파티원 보호막 효과",
          "Class": "",
          "Categorys": [
              200020
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "0.95%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "2.10%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "3.50%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      },
      {
          "Value": 47,
          "Text": "파티원 회복 효과",
          "Class": "",
          "Categorys": [
              200020
          ],
          "Tiers": null,
          "EtcValues": [
              {
                  "DisplayValue": "0.95%",
                  "Value": 1,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "2.10%",
                  "Value": 2,
                  "IsPercentage": true
              },
              {
                  "DisplayValue": "3.50%",
                  "Value": 3,
                  "IsPercentage": true
              }
          ]
      }
  ]
};
  
module.exports.findValueAndLabel = (inputString) => {
    // 입력에서 "Text"와 "DisplayValue" 추출
    const match = inputString.match(/^(.+)\s\+([0-9.]+)%?$/);
    if (!match) return "[알 수 없음]";

    const inputText = match[1]; // "무기 공격력"
    const inputValue = parseFloat(match[2]); // 0.80 또는 195
    const isPercentage = inputString.includes("%"); // 입력값에 %가 포함되어 있는지 확인

    // EtcSubs에서 Text가 일치하는 항목 필터링
    const matchingSubs = data.EtcSubs.filter(sub => sub.Text === inputText);

    if (matchingSubs.length === 0) return "[알 수 없음]";

    // % 여부에 따라 적절한 항목 선택
    const matchingSub = matchingSubs.find(sub =>
    sub.EtcValues.some(value => value.IsPercentage === isPercentage)
    );

    if (!matchingSub || !matchingSub.EtcValues) return "[알 수 없음]";

    // DisplayValue로 티어 찾기
    const tier = matchingSub.EtcValues.find(value => parseFloat(value.DisplayValue.replace("%", "")) === inputValue);
    if (!tier) return "[알 수 없음]";

    // 티어 값에 따라 결과 반환
    if (tier.Value === 1) {
    return "[하]";
    } else if (tier.Value === 2) {
    return "[중]";
    } else if (tier.Value === 3) {
    return "[상]";
    } else {
    return "[알 수 없음]";
    }
};